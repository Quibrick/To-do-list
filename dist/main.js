(()=>{"use strict";const e=function(e,t){"none"===e.style.display?e.style.display=`${t}`:e.style.display="none"},t=function(e){const t=document.createElement("form");t.classList.add("hidden-form"),t.style.display="flex";const n=document.createElement("input");n.type="text",n.placeholder="Title",n.id=`title-${e}`,n.required=!0,t.appendChild(n);const d=document.createElement("input");d.type="text-area",d.placeholder="Description",d.id=`description-${e}`,d.required=!0,t.appendChild(d);const a=document.createElement("div");a.id="radio-input-container";const i=document.createElement("p");i.innerHTML="Priority :",a.appendChild(i);const l=["High","Normal","Low"];for(let e=0;e<l.length;e++){const t=document.createElement("label");t.htmlFor=l[e],t.innerHTML=l[e],t.name="priority";const n=document.createElement("input");n.type="radio",n.name="priority",n.value=l[e],a.appendChild(t),a.appendChild(n)}t.appendChild(a);const s=document.createElement("input");return s.type="date",s.id=`due-date-${e}`,s.required=!0,t.appendChild(s),t},n=function(e){return[document.getElementById(`title-${e}`).value,document.getElementById(`description-${e}`).value,document.getElementById(`due-date-${e}`).value,document.querySelector('input[name="priority"]:checked').value]},d=function(e,t,n){const d=document.createElement("button");return d.id=e,d.innerHTML=t,d.style.display=n,d},a=function(e){const t=document.getElementById(`task-title-${e.id}`),n=document.getElementById(`task-description-${e.id}`),d=document.getElementById(`task-due-date-${e.id}`),a=document.getElementById(`task-priority-${e.id}`);t.innerHTML=`${e.title}`,n.innerHTML=`${e.description}`,d.innerHTML=`${e.dueDate}`,a.innerHTML=`${e.priority}`},i=function(e){const t=document.getElementById(`title-${e}`),n=document.getElementById(`description-${e}`),d=document.getElementById(`due-date-${e}`);t.value="",n.value="",d.value=""},l=function(a){const i=document.getElementById("tasks-container"),l=document.createElement("div");l.classList.add("single-task-container"),l.id=`task-${a}`;const s=document.createElement("div");s.classList.add("visible-task"),s.style.display="flex";const c=document.createElement("div");c.classList.add("hidden-task"),c.style.display="none";const o=d(`task-title-${a}`,"","block");o.classList.add("task-title-class"),o.addEventListener("click",(()=>{e(c,"flex")})),s.appendChild(o);const r=document.createElement("div");r.classList.add("right-hand-items"),r.style.display="flex",s.appendChild(r);const m=document.createElement("div");m.id=`task-priority-${a}`,m.classList.add("task-look"),r.appendChild(m);const p=document.createElement("div");p.id=`task-due-date-${a}`,p.classList.add("task-look"),r.appendChild(p);const u=d(`edit-task-${a}`,"","block");u.classList.add("task-btn"),u.addEventListener("click",(()=>{const i=new Map(JSON.parse(localStorage.taskManager)).get(`task-${a}`);!function(a){const i=document.getElementsByTagName("body")[0],l=document.createElement("div");l.id="modal-form",l.style.display="none",l.classList.add("modal");const s=document.createElement("div"),c=document.createElement("h1");c.id="edit-task-title-modal",c.innerHTML="Edit task",s.appendChild(c);const o=t("modal");s.appendChild(o);const r=document.createElement("div");r.classList.add("hidden-buttons"),r.style.display="flex";const m=d("save-changes-btn-modal","Save changes","block");m.addEventListener("click",(()=>{const e=n("modal");console.log(e)})),r.appendChild(m);const p=d("discard-btn-modal","Discard","block");p.addEventListener("click",(()=>{e(l,"none"),l.remove()})),r.appendChild(p),s.appendChild(r),s.classList.add("modal-content"),l.appendChild(s),i.appendChild(l)}();const l=document.getElementById("modal-form");l.style.display="none",e(l,"block"),function(e){const t=document.getElementById("title-modal"),n=document.getElementById("description-modal"),d=document.getElementById("due-date-modal");t.value=`${e.title}`,n.value=`${e.description}`,d.value=`${e.dueDate}`}(i),console.log("edit")}));const k=document.createElement("img");k.id="edit-task-img",k.src="./img/edit.svg",u.appendChild(k),r.appendChild(u);const y=d(`delete-task-${a}`,"","block");y.classList.add("task-btn");const h=document.createElement("img");h.id="delete-task-img",h.src="./img/cancel.svg",y.addEventListener("click",(()=>{l.remove();let e=new Map(JSON.parse(localStorage.taskManager));e.delete(`task-${a}`),localStorage.taskManager=JSON.stringify(Array.from(e.entries()))})),y.appendChild(h),r.appendChild(y);const g=document.createElement("div");g.classList.add("task-description-class"),g.id=`task-description-${a}`,g.classList.add("task-look"),c.appendChild(g),l.appendChild(s),l.appendChild(c),i.appendChild(l)},s=function(s,c){const o=document.getElementById("add-new"),r=document.createElement("div");r.classList.add("hidden-container"),r.style.display="none";const m=document.createElement("div");m.classList.add("hidden-buttons"),m.style.display="flex";const p=t("add-task");r.appendChild(p);const u=d("add-new-btn","+ Add task","block");u.addEventListener("click",(()=>{e(r,"block"),e(u,"none")})),o.appendChild(u);const k=d("submit-btn","Submit","block");k.addEventListener("click",(()=>{const t=n("add-task");if(function(e){const t=e.length;for(let n=0;n<t;n++)if(""===e[n])return console.log("woops"),!1;return!0}(t)){l(s);const n=new class{constructor(e,t,n,d,a){this.id=e,this.title=t,this.description=n,this.dueDate=d,this.priority=a}set ChangeTitle(e){this.title=e}set ChangeDescription(e){this.description=e}}(s,t[0],t[1],t[2],t[3]);c.set(`task-${s}`,n),localStorage.taskManager=JSON.stringify(Array.from(c.entries())),s++,localStorage.setItem("id",s),a(n),i("add-task"),e(r,"none"),e(u,"block")}})),m.appendChild(k);const y=d("cancel-btn","Cancel","block");y.addEventListener("click",(()=>{e(r,"none"),e(u,"block"),i("add-task")})),m.appendChild(y),r.appendChild(m),o.appendChild(r)};!function(){let e=JSON.parse(localStorage.getItem("id"));if(null===e){let e=new Map;s(0,e)}else{let t=new Map(JSON.parse(localStorage.taskManager));s(e,t);for(let e of t.values())l(e.id),a(e)}}()})();